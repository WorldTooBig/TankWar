<!DOCTYPE html>
<html>
<head>

<script src="js/jquery-3.3.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/player.css">


</head>

<body>
	<div id="backgroundDiv">
		<table style="border-spacing:0" border=0 id="tab"></table>
	<div>
	<div id="nav">
		<div class="brick"></div><br/>
		<div class="steel"></div><br/>
		<div class="water"></div><br/>
		<div class="tank"></div><br/>
	</div>
	<div id="rec" style="position:absolute;left: 100px;top: 100px; width: 50px;height: 50px;background: red;"></div>
</body>
<script src="js/init.js"></script>
<script>
//加载地图
window.onload = loading();

function loading() {
	var str = "";
	var i, j;
	for(var i = 0; i < backHeight/50; i++) {
		str += "<tr>";
		for(var j = 0; j < backWidth/50; j++) {
			str += "<td></td>";
		}
		str += "</tr>";
	}
	$("#tab").append(str);
}//i = 18, j = 32

var cls;
$("#nav div").click(function(){
	cls = $(this).attr("class");
	var colorValue;
	switch(cls) {
		case "brick":colorValue = "yellow";break;
		case "water":colorValue = "blue";break;
		case "steel":colorValue = "pink";break;
	}
	$("#rec").css("background-color", colorValue);
});

$("#backgroundDiv td").click(function(){
	var colorValue;
	switch(cls) {
		case "brick":colorValue = "yellow";break;
		case "water":colorValue = "blue";break;
		case "steel":colorValue = "pink";break;
	}
	$(this).css("background-color", colorValue);
});

        //获取div元素
    var rec = document.getElementById("rec")
    var down = false;
    var dx = 0;
    var dy = 0;
    var sx = 0;
    var sy = 0;
    document.onmousemove = function(e){
        if (down) {
            var ev = e || event;
            console.log(ev.clientY)
            rec.style.top = ev.clientY - (dy - sy) + 'px';
            rec.style.left = ev.clientX - (dx - sx) + 'px';
        }
    }
    rec.onmousedown = function(){
        dx = event.clientX;
        dy = event.clientY;
        sx = parseInt(rec.style.left);
        sy = parseInt(rec.style.top);
        if (!down) {
            down  = true;
        }
    }
    document.onmouseup = function(){
        if (down) {
            down = false;
        }
    }
</script>
</html>